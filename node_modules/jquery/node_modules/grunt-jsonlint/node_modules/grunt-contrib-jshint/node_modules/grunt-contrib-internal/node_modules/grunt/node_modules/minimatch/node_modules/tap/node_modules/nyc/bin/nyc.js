#!/usr/bin/env node
var foreground = require('foreground-child')
var NYC = require('../')
var path = require('path')
var sw = require('spawn-wrap')

if (process.env.NYC_CWD) {
  ;(new NYC()).wrap()

  // make sure we can run coverage on
  // our own index.js, I like turtles.
  var name = require.resolve('../')
  delete require.cache[name]

  sw.runMain()
} else {
  var yargs = require('yargs')
    .usage('$0 [command] [options]\n\nrun your tests with the nyc bin to instrument them with coverage')
    .comma