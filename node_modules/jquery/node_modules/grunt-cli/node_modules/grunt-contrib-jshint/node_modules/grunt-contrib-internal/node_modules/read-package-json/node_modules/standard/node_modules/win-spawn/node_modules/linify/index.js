var fs = require('fs')
var join = require('path').join
var resolve = require('path').resolve
var makeFilter = require('./lib/filter')

module.exports = transform
function transform(path, options) {
  options = options || {}
  path = resolve(path)
  var root = resolve(arguments[2] || path)
  options.filter = makeFilter(options.filter || options.grep)

  var stat = fs.statSync(path)
  if (stat.isDirectory()) {
    var dir = fs.readdirSync(path);
    return dir
      .map(function (child) {
        if (child !